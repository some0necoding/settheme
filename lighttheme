#!/bin/bash
#
#		--------------- lighttheme ---------------
#
#		This script can be used both to manually
#		set kde desktop theme to breeze (light) or 
#		to specify the time when it will be set
#		automatically.
#


CMD_NAME="lighttheme"


# Source global variables and functions
source globals.sh


# If no arguments are provided the theme is changed to breeze light. TODO: move org.kde.breeze.desktop into a variable inside a config file and make it editable using this command
[[ -z $1 ]] && { lookandfeeltool -a 'org.kde.breeze.desktop' &> /dev/null; exit 0; }

# If argument set is provided, light theme activation time is set.
[[ -n $1 && -n $2 ]] && {

	# Check argument
	[[ $1 == "set" ]] || { echo "Invalid command: $1"; exit 0; }

	D_TIME=$(get_time $DARKTHEME_TIMER)

	# If inserted date is equal to darktheme date, throw an error
	[[ $2 != $D_TIME ]] || { echo "Light theme activation time cannot be the same as darktheme"; exit 0; }

	# Set light theme activation time
	set_time $LIGHTTHEME_TIMER $2 || exit 1

	echo "Light theme activation time successfully set to $2!"
	exit 0
}
